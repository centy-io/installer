---
displayNumber: 5
status: in-progress
priority: 1
createdAt: 2026-02-15T18:01:55.088993+00:00
updatedAt: 2026-02-15T18:05:42.383051+00:00
---

# Restart centy-daemon after installation to use the updated binary

After installing or upgrading the centy-daemon binary, the installer should restart the daemon process so that the newly installed version is used immediately. Currently, if the daemon is already running, the old process continues running with the previous binary until manually restarted.

## Current behavior

The installer downloads, verifies, and writes the new binary to `~/.centy/bin/centy-daemon`, but does not restart the daemon. If the daemon was already running, the old version remains active in memory.

## Expected behavior

1. After writing the new binary, check if `centy-daemon` is currently running
1. If running, stop the existing daemon process gracefully
1. Start the newly installed daemon
1. Print a message indicating the daemon was restarted (e.g., `Restarted centy-daemon to use the updated version`)
1. If the daemon was not running, skip the restart (do not auto-start on fresh installs unless desired)

## Implementation notes

* On Unix, detect the running daemon via its PID file (if one exists at `~/.centy/daemon.pid` or similar) or by searching for the process
* Send `SIGTERM` for graceful shutdown, wait briefly, then `SIGKILL` if needed
* On Windows, use the equivalent process management APIs
* The restart logic should live in a new module (e.g., `lib/src/daemon.rs`) or be added to `install.rs` after the binary is written
* Consider adding a `--no-restart` flag to skip the restart if the user wants to manage the daemon lifecycle manually
